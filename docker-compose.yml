services:
    database-postgres:
        image: postgres
        volumes: 
            - .:/application/data/db/var/lib/postgresql/data
        ports: 
            - "5432:5432"
        environment: 
            POSTGRES_DB: products
            POSTGRES_USER: olist_django
            POSTGRES_PASSWORD: mudar123
    migrate:
        build: 
            context: .
            dockerfile: Dockerfile
        command: python manage.py migrate
        volumes: 
            - .:/application
        depends_on:
            - database-postgres
    start-app:
        build: 
            context: .
            dockerfile: Dockerfile
        command: python manage.py runserver 0.0.0.0:8000
        volumes: 
            - .:/application
        ports: 
            - "8000:8000"
        depends_on:
            - database-postgres
            - migrate
    
    